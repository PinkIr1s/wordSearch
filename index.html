<!DOCTYPE html>
<html>
    <head>
        <style>
            body {
                margin: 0;
                height: 100vh;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                gap: 5px;
            }

            #eve {
                width: 200px;
                height: 20px;
            }

            #output {
                width: 500px;
                height: 300px;
                word-wrap: break-word;
                line-height: 20px;
            }
        </style>
    </head>
    <body>
        <div>
            <p>
                To search, input a pattern such as "abc" and it will find every word that fits. In this example, "bat" would fit but "zoo" would not.
            </p>
        </div>
        <div>
            <input id="eve">
            <input id="button" type="button" value="Search">
        </div>
        <div>
            <p id="output"></p>
        </div>
    </body>
    <script src="words.js"></script>
    <script>
        let text_input = document.getElementById("eve");
        let button = document.getElementById("button");
        let output = document.getElementById("output");

        button.addEventListener("click", (event) => {
            let matching_words = search(text_input.value).join(", ");
            output.innerText = matching_words;
        });

        document.addEventListener("keydown", (event) => {
            if (event.key === "Enter") {
                output.innerText = search(text_input.value).join(", ");
            }
        });
        
        function search(term) {

            let search_term = term.toUpperCase();
            let found_list = [];

            for (let i = 0; i < wordList.length; i++) {
                let word = wordList[i];
                if (word.length !== search_term.length) {
                    continue;
                }
                console.log(word);
                let assignments = [];
                for (let j = 0; j < search_term.length; j++) {
                    if (/[a-z]/.test(word[j]) && assignments[search_term[j]] === undefined) {
                        let prev = word[j];
                        assignments[search_term[j]] = word[j];
                        word = word.replaceAll(word[j], search_term[j]);
                        console.log("Made Replacement, " + prev + " became " + word[j]);
                    }
                }
                console.log(word);
                if (word === search_term) {
                    console.log(wordList[i] + " was added to the list.");
                    found_list.push(wordList[i]);
                } else {
                    console.log(wordList[i] + " was NOT added to the list.");
                }
            }

            return found_list;
        }

        // let endings = [];

        // for (let i=0; i < wordList.length; i++) {
        //     const end = wordList[i].substr(wordList[i].length-3, 3);

        //     let found = false;
        //     for (let j = 0; j < endings.length; j++) {
        //         if (endings[j].name === end) {
        //             endings[j].count++;
        //             found = true;
        //             break;
        //         }
        //     }
        //     if (!found) {
        //         endings.push(
        //             {
        //                 name: end,
        //                 count: 1
        //             }
        //         );
        //     }
        // }

        // console.log(endings.sort((a, b) => b.count - a.count));

    </script>
</html>